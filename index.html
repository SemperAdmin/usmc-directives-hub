<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Content Security Policy for enhanced security -->
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' 'unsafe-inline';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  connect-src 'self'
    https://www.marines.mil
    https://www.mynavyhr.navy.mil
    https://www.secnav.navy.mil
    https://www.igmc.marines.mil
    https://www.esd.whs.mil
    https://comptroller.war.gov
    https://www.travel.dod.mil
    https://usmc-directives-proxy.onrender.com
    http://localhost:3000
    https://corsproxy.io
    https://api.allorigins.win
    https://cors-anywhere.herokuapp.com
    https://api.codetabs.com;
  font-src 'self' data:;
  object-src 'none';
  base-uri 'self';
  form-action 'self';
  frame-ancestors 'none';
  upgrade-insecure-requests;
">
<title>USMC Directives Hub by Semper Admin</title>
<link rel="icon" type="image/png" href="image.png">
<link rel="stylesheet" href="style.css?v=23">
<link rel="stylesheet" href="ai-improvements.css?v=2">
</head>
<body>
<header>
  <a href="https://linktr.ee/semperadmin" target="_blank" class="branding-link">
    <div class="branding">
      <img src="IMG_2324.jpeg" alt="Semper Admin Logo" class="header-logo">
      <div class="header-text">
        <h1>USMC Directives Hub</h1>
        <p class="byline">by Semper Admin</p>
      </div>
    </div>
  </a>
  <p class="subtitle">Search and track Marine Corps Messages, Publications, and Forms</p>
  <div class="controls">
    <button id="refreshBtn">üîÑ Refresh</button>
    <button id="themeToggle">üåô Dark Mode</button>
  </div>
</header>
<main>
  <div class="message-type-tabs">
    <button class="message-type-btn" data-type="almar">ALMARs <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="alnav">ALNAVs <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="dodfmr">DoD FMR <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="dodforms">DoD Forms <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="igmc">IGMC <span class="tab-counter">0</span></button>
    <button class="message-type-btn active" data-type="maradmin">MARADMINs <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="jtr">JTR <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="mcpub">MCPUBs <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="secnav">SECNAV <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="semperadmin">Semper Admin <span class="tab-counter">0</span></button>
    <button class="message-type-btn" data-type="youtube">YouTube <span class="tab-counter">0</span></button>
    <button class="message-type-btn all-messages-btn" data-type="all">All Messages <span class="tab-counter">0</span></button>
  </div>
  <div class="filters-section">
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search by ID, subject, or keywords..." />
      <button id="clearSearch" class="clear-btn" title="Clear search">‚úï</button>
    </div>
    <div class="filter-controls">
      <div class="quick-filters">
        <button class="quick-filter-btn active" data-days="1">Today</button>
        <button class="quick-filter-btn" data-days="7">This Week</button>
        <button class="quick-filter-btn" data-days="30">This Month</button>
        <button class="quick-filter-btn" data-days="90">Last 90 Days</button>
      </div>
      <select id="dateRange">
        <option value="1" selected>Last 24 hours</option>
        <option value="7">Last 7 days</option>
        <option value="14">Last 14 days</option>
        <option value="30">Last 30 days</option>
        <option value="60">Last 60 days</option>
        <option value="90">Last 90 days</option>
        <option value="0">All messages</option>
      </select>
    </div>
  </div>
  <div id="status" class="status">Loading cached data...</div>
  <div id="error" class="error hidden"></div>
  <div id="summaryStats" class="summary-stats hidden"></div>
  <div id="results" class="results"></div>
</main>
<footer>
  <p class="semper-admin-branding">
    A <a href="https://linktr.ee/semperadmin" target="_blank">Semper Admin</a> Project
  </p>
  <p>Data source: <a href="https://www.marines.mil/News/Messages/" target="_blank">Marines.mil Messages</a> & <a href="https://www.esd.whs.mil/Directives/forms/" target="_blank">DoD Forms</a> | Last updated: <span id="lastUpdate">Never</span></p>
  <p class="footer-links">
    <a href="https://www.facebook.com/profile.php?id=61558093420252" target="_blank">Facebook</a> ‚Ä¢
    <a href="https://www.secnav.navy.mil/doni/Directives/Forms/doniAllInstructions.aspx" target="_blank">SECNAV</a> ‚Ä¢
    <a href="https://www.travel.dod.mil/" target="_blank">JTR</a> ‚Ä¢
    <a href="https://comptroller.war.gov/FMR/change/" target="_blank">DoD FMR</a>
  </p>
  <p class="footer-note">Auto-refreshes every 10 minutes ‚Ä¢ Data cached for offline access</p>
</footer>

<!-- Feedback Widget -->
<button id="feedbackBtn" class="feedback-btn" title="Share Feedback">üí¨ Feedback</button>

<!-- Feedback Modal -->
<div id="feedbackModal" class="feedback-modal hidden" role="dialog" aria-modal="true" aria-labelledby="feedbackModalTitle">
  <div class="feedback-modal-content">
    <div class="feedback-modal-header">
      <h2 id="feedbackModalTitle">Share Your Feedback</h2>
      <button id="closeFeedbackModal" class="feedback-close-btn" aria-label="Close feedback modal">‚úï</button>
    </div>
    <form id="feedbackForm">
      <div class="feedback-form-group">
        <label for="feedbackType">Feedback Type <span class="required">*</span></label>
        <select id="feedbackType" required>
          <option value="">Select type...</option>
          <option value="bug">Bug Report</option>
          <option value="feature">Feature Request</option>
          <option value="ux">UX Suggestion</option>
        </select>
      </div>

      <div class="feedback-form-group">
        <label for="feedbackTitle">Title <span class="required">*</span></label>
        <input type="text" id="feedbackTitle" placeholder="Brief summary of your feedback" required maxlength="100">
      </div>

      <div class="feedback-form-group">
        <label for="feedbackDescription">Description <span class="required">*</span></label>
        <textarea id="feedbackDescription" placeholder="Please describe your feedback in detail..." required rows="6"></textarea>
      </div>

      <div class="feedback-form-group">
        <label for="feedbackEmail">Email (Optional - will be public in GitHub issue)</label>
        <input type="email" id="feedbackEmail" placeholder="your@email.mil (visible publicly)" aria-describedby="emailPrivacyNote">
        <small id="emailPrivacyNote" style="display: block; margin-top: 0.25rem; color: #666; font-size: 0.85rem;">‚ö†Ô∏è Your email will be visible in the public GitHub issue</small>
      </div>

      <div class="feedback-form-actions">
        <button type="button" id="cancelFeedback" class="feedback-btn-secondary">Cancel</button>
        <button type="submit" class="feedback-btn-primary">Submit Feedback</button>
      </div>

      <div id="feedbackStatus" class="feedback-status hidden"></div>
    </form>
  </div>
</div>

<script src="lib/fa-checklists.js"></script>
<script src="lib/secnav-data.js"></script>
<script src="lib/alnav-data.js"></script>
<script src="app.js?v=23"></script>
</body>
</html>
